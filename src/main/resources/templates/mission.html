<div class="admin-container">
    <div class="nav-btns">
        <button onclick="showSection('daily-tasks')" data-section="mission" class="active">Product </button> </div>
    <div id="daily-tasks" class="section active">
        <button class="btn btn-add-item" data-form-id="addMissionForm">➕ Add Product</button>
        
        <div id="addMissionForm" class="add-form-container">
            <h3>New Product</h3>
            <button class="btn btn-close-form">✖️ Hủy</button> 
            <div class="form-grid">
                <div class="form-group">
                    <label for="missionName">ProDuct Name</label>
                    <input type="text" id="missionName" placeholder="nhập tên sản phẩm" class="form-control-custom">
                </div>
                <div class="form-group">
                    <label for="missionAssignee">Price</label>
                    <input type="number" id="missionAssignee" placeholder="Giá sản phẩm" class="form-control-custom">
                </div>
                <div class="form-group">
                    <label for="missionDueDate">Mô tả sản phẩm</label>
                    <input type="text" id="missionDueDate" placeholder="Mô tả ngắn cho sản phẩm" class="form-control-custom">
                </div>
                <div class="form-group">
                    <label for="missionPriority">Loại</label>
                    <select id="missionPriority" class="form-control-custom">
                        <option value="low">Thấp</option>
                        <option value="medium">Trung bình</option>
                        <option value="high">Cao</option>
                    </select>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-success">➕ Thêm nhiệm vụ</button>
                <button class="btn btn-secondary btn-close-form">Hủy</button> 
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>ID</th><th>Product name</th><th>price</th><th>mổ tả</th><th>Loại</th><th>Thao tác</th>
                </tr>
            </thead>
            <tbody id="Product-body">
                <tr>
                    <td>2</td><td>cafe  sữa</td><td>20.000đ</td><td>Cà phê đắng thấy bà</td><td>Café</td>
                    <td><button class="btn">Chỉnh sửa</button> <button class="btn">Xóa</button></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    product = []
    function renderProductTable(data) {
        const tbody = document.getElementById("Product-body");
        tbody.innerHTML = data.map(u => `
      <tr>
            <td>${u.id}</td>
            <td><input type="text" value="${u.name}" style="border: 0px;background: none;"></td>
            <td><input type="num" value="${u.price}" style="border: 0px;background: none;"></td>
            <td><input type="text" value="${u.mota}" style="border: 0px;background: none;"></td>
            <td><input type="text" value="${u.ten_loai}" style="border: 0px;background: none;"></td>
            <td><button class="btn">Chỉnh sửa</button> <button class="btn">Xóa</button></td>
        </tr>
    `).join("");
    }

    async function fetchProduct() {
        try {
            const res = await fetch("http://localhost:8080/api/admin/all_product");
            if (!res.ok) throw new Error("Lỗi server");
            product = await res.json();
            renderProductTable(product);
        } catch (err) {
            console.error("Lỗi tải danh sách nhân viên:", err);
            document.getElementById('staff-body').innerHTML = `
        <tr><td colspan="5" class="text-danger">Không thể tải dữ liệu nhân viên</td></tr>
      `;
        }
    }
    document.addEventListener("DOMContentLoaded",fetchProduct());
</script>